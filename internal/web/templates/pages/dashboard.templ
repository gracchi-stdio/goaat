package pages

import (
	"github.com/gracchi-stdio/goaat/internal/auth"
	"github.com/gracchi-stdio/goaat/internal/web/templates/layouts"
)

templ DashboardContent() {
	<!-- Page Header -->
	<div class="page-header">
		<div>
			<h1 class="page-title">Welcome back, { auth.GetUserFromContext(ctx).Name }!</h1>
			<p class="page-subtitle">Here's what's happening with your documentation projects</p>
		</div>
		<sl-button variant="primary">
			<sl-icon slot="prefix" name="plus-lg"></sl-icon>
			New Repository
		</sl-button>
	</div>

	<!-- Stats Grid -->
	<div class="dashboard-grid">
		<sl-card>
			<div slot="header" class="card-header">
				<sl-icon name="folder" class="icon-primary"></sl-icon>
				<strong>Repositories</strong>
			</div>
			<div class="stat-value">0</div>
			<div class="stat-label">Connected repositories</div>
		</sl-card>

		<sl-card>
			<div slot="header" class="card-header">
				<sl-icon name="file-earmark-text" class="icon-success"></sl-icon>
				<strong>Documents</strong>
			</div>
			<div class="stat-value">0</div>
			<div class="stat-label">Markdown files edited</div>
		</sl-card>

		<sl-card>
			<div slot="header" class="card-header">
				<sl-icon name="git" class="icon-warning"></sl-icon>
				<strong>Commits</strong>
			</div>
			<div class="stat-value">0</div>
			<div class="stat-label">Total commits made</div>
		</sl-card>

		<sl-card>
			<div slot="header" class="card-header">
				<sl-icon name="clock-history" class="icon-danger"></sl-icon>
				<strong>Recent Changes</strong>
			</div>
			<div class="stat-value">0</div>
			<div class="stat-label">Pending changes</div>
		</sl-card>
	</div>

	<!-- Main Content Grid -->
	<div style="display: grid; gap: var(--sl-spacing-large);">
		<!-- Recent Activity Card -->
		<sl-card>
			<div slot="header" style="display: flex; justify-content: space-between; align-items: center;">
				<strong>Recent Activity</strong>
				<sl-button variant="text" size="small">View All</sl-button>
			</div>
			
			<sl-alert variant="neutral" open>
				<sl-icon slot="icon" name="inbox"></sl-icon>
				<strong>No recent activity yet</strong><br/>
				<div style="margin-top: var(--sl-spacing-small);">
					Start by connecting a repository to see your activity here.
				</div>
			</sl-alert>
		</sl-card>

		<!-- Quick Actions Card -->
		<sl-card>
			<div slot="header">
				<strong>Quick Actions</strong>
				<br/>
				<small style="color: var(--sl-color-neutral-500);">Common tasks to get you started</small>
			</div>
			
			<div style="display: grid; gap: var(--sl-spacing-small);">
				<sl-button variant="default" size="large" outline style="justify-content: flex-start; text-align: left;">
					<sl-icon slot="prefix" name="folder-plus"></sl-icon>
					<div style="display: flex; flex-direction: column; gap: var(--sl-spacing-3x-small);">
						<strong>Connect Repository</strong>
						<small style="color: var(--sl-color-neutral-500); font-weight: normal;">Link a Starlight docs repo</small>
					</div>
				</sl-button>

				<sl-button variant="default" size="large" outline disabled style="justify-content: flex-start; text-align: left;">
					<sl-icon slot="prefix" name="file-earmark-plus"></sl-icon>
					<div style="display: flex; flex-direction: column; gap: var(--sl-spacing-3x-small);">
						<strong>Create Document</strong>
						<small style="color: var(--sl-color-neutral-500); font-weight: normal;">Add new markdown file</small>
					</div>
				</sl-button>

				<sl-button variant="default" size="large" outline style="justify-content: flex-start; text-align: left;">
					<sl-icon slot="prefix" name="person-gear"></sl-icon>
					<div style="display: flex; flex-direction: column; gap: var(--sl-spacing-3x-small);">
						<strong>Edit Profile</strong>
						<small style="color: var(--sl-color-neutral-500); font-weight: normal;">Update your settings</small>
					</div>
				</sl-button>
			</div>
		</sl-card>
	</div>
}

templ Dashboard() {
	@layouts.AuthedLayout("Dashboard", "dashboard-page") {
		@DashboardContent()
	}
}
